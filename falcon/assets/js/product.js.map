{"version":3,"file":"js/product.js","mappings":"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","sources":["webpack://Falcon-theme/webpack/bootstrap","webpack://Falcon-theme/webpack/runtime/compat get default export","webpack://Falcon-theme/webpack/runtime/define property getters","webpack://Falcon-theme/webpack/runtime/hasOwnProperty shorthand","webpack://Falcon-theme/external var \"jQuery\"","webpack://Falcon-theme/./js/product/components/ProductGallery.js","webpack://Falcon-theme/./js/product/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","class ProductGallery {\n  constructor({\n    thumbsSliderSelector = '.js-product-thumbs',\n    mainSliderSelector = '.js-product-main-images',\n    modalSliderSelector = '.js-modal-gallery',\n    galleryModalSelector = '.js-product-images-modal',\n  } = {}) {\n    this.thumbsSliderSelector = thumbsSliderSelector;\n    this.mainSliderSelector = mainSliderSelector;\n    this.modalSliderSelector = modalSliderSelector;\n    this.galleryModalSelector = galleryModalSelector;\n    this.mainSliderSwiperInstance = null;\n    this.modalSliderSwiperInstance = null;\n  }\n\n  init() {\n    this.mainSliderSwiperInstance = null;\n    this.modalSliderSwiperInstance = null;\n    this.initProductImageSlider();\n    this.initModalGallerySlider();\n  }\n\n  async initProductImageSlider() {\n    const thumbsElem = document.querySelector(this.thumbsSliderSelector);\n    const galleryTopElem = document.querySelector(this.mainSliderSelector);\n\n    if (!thumbsElem && !galleryTopElem) {\n      return;\n    }\n\n    const galleryThumbs = new prestashop.SwiperSlider(thumbsElem, {\n      breakpoints: {\n        320: {\n          slidesPerView: 3,\n        },\n        576: {\n          slidesPerView: 4,\n        },\n      },\n      watchSlidesVisibility: true,\n      watchSlidesProgress: true,\n    });\n\n    const galleryThumbsInstance = await galleryThumbs.initSlider();\n\n    const mainSlider = new prestashop.SwiperSlider(galleryTopElem, {\n      spaceBetween: 10,\n      navigation: {\n        nextEl: galleryTopElem.querySelector('.swiper-button-next'),\n        prevEl: galleryTopElem.querySelector('.swiper-button-prev'),\n      },\n      thumbs: {\n        swiper: galleryThumbsInstance,\n      },\n    });\n\n    const mainSliderInstance = await mainSlider.initSlider();\n\n    this.mainSliderSwiperInstance = mainSliderInstance;\n  }\n\n  initModalGallerySlider() {\n    const gallerySliderElem = document.querySelector(this.modalSliderSelector);\n\n    if (!gallerySliderElem) {\n      return;\n    }\n\n    const handleModalOpen = async () => {\n      if (this.modalSliderSwiperInstance) {\n        gallerySliderElem.style.opacity = 0;\n\n        // DIRTY HACK\n        setTimeout(() => {\n          this.modalSliderSwiperInstance.update();\n          this.modalSliderSwiperInstance.slideTo(this.mainSliderSwiperInstance ? this.mainSliderSwiperInstance.activeIndex : 0, 0);\n          gallerySliderElem.style.opacity = 1;\n        }, 200);\n      } else {\n        const modalSlider = new prestashop.SwiperSlider(gallerySliderElem, {\n          slidesPerView: 1,\n          spaceBetween: 10,\n          initialSlide: this.mainSliderSwiperInstance ? this.mainSliderSwiperInstance.activeIndex : 0,\n          navigation: {\n            nextEl: gallerySliderElem.querySelector('.swiper-button-next'),\n            prevEl: gallerySliderElem.querySelector('.swiper-button-prev'),\n          },\n        });\n\n        const modalSliderInstance = await modalSlider.initSlider();\n\n        this.modalSliderSwiperInstance = modalSliderInstance;\n      }\n    };\n\n    // TO REFACTO LATER WITH BS5 REMOVE JQUERY!\n    $(this.galleryModalSelector).on('show.bs.modal', handleModalOpen);\n  }\n}\n\nexport default ProductGallery;\n","import $ from 'jquery';\nimport ProductGallery from '@js/product/components/ProductGallery';\n\nfunction activateFirstProductTab() {\n  $('.product-tabs .nav .nav-item:first-child a').tab('show');\n}\n\nfunction handleProductDetailsToggle() {\n  const $link = $('[href=\"#product-details\"]');\n  const $tab = $($link.attr('href'));\n\n  if ($tab.length && $link.length && $link.hasClass('active')) {\n    $tab.addClass('show active');\n  }\n}\n\n$(() => {\n  activateFirstProductTab();\n  const gallery = new ProductGallery();\n\n  gallery.init();\n\n  prestashop.on('updatedProductCombination', (event) => {\n    gallery.init();\n\n    const { product_add_to_cart: productAddToCart } = event;\n\n    if (productAddToCart) {\n      const node = document.createElement('div');\n      node.innerHTML = productAddToCart;\n\n      const html = node.querySelector('.js-product-actions-buttons');\n\n      if (html) {\n        const productActionsElement = document.querySelector('.js-product-actions-buttons');\n\n        productActionsElement.replaceWith(html);\n      }\n    }\n  });\n\n  prestashop.on('updatedProduct', () => {\n    handleProductDetailsToggle();\n  });\n});\n"],"names":["__webpack_require__","module","getter","exports","definition","key","obj","prop","ProductGallery","thumbsSliderSelector","mainSliderSelector","modalSliderSelector","galleryModalSelector","thumbsElem","galleryTopElem","galleryThumbsInstance","mainSliderInstance","gallerySliderElem","handleModalOpen","modalSliderInstance","activateFirstProductTab","handleProductDetailsToggle","$link","$tab","gallery","event","productAddToCart","node","html"],"sourceRoot":""}